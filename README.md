# OurGallery
# CaseLab Jasvacript 2024

Тестовое задание выполнил: Вишняков Владимир

## a. Описание решения в произвольном виде

Данные для входа в Directus:
 + логин - admin@example.com
 + пароль - d1r3ctu5

Сайт галерея, на главной странице нас встречают альбомы, на каждый из альбомов можно перейти и увидеть галерею изображений в альбоме.
Используемый стек технологий:
1) React
2) Directus
3) mobx

### Frontend решение

Присутствуют две страницы
1) Home - страница со всеми альбомами
2) Album - страница конкретного альбома

Также присутствуют 4 компонента из которых состоят данные страницы:
1) AlbomCover - обложка альбома на странице Home
2) GalleryImage - обложка изображения на странице Album
3) PaginationImages - компонент пагинации внизу страницы Album
4) PopupImage - модальное окно с изображением, его названием, возможностью переключиться между фотографиями и кнопкой "закрыть"

Стейт-менеджер представляет из себя файл PopupImageStore, который хранит всю информацию об изображении.

Роутинг реализован с помощью react-router-dom, ниже представлены возможные пути по которым можно переходить на сайте:
1) / - Домашняя страница со всеми альбомами
2) /album/<album_name> - страница конкретного альбома
3) /album/<album_name>?page=<page_number> - страница конкретного альбома, текущая страница в пагинации равна page_number
4) /album/<album_name>/<image_id> - страница конкретного альбома с открытом модальном окном изображениия в нем

Для взаимодействия с Directus используются fetch запросы.

### Backend решение

В Directus создано две коллекции:
1) gallery - коллекция со всеми фотографиями, есть поле album_id, которое является внешним ключом для коллекции album, таким образом при загрузке фотографии она загружается в конкретный альбом.
2) album - коллекция со всеми альбомами, у каждого альбома присутствует его имя и изображение для обложки данного альбома.

### Выполненные дополнительные требования
1) Сделать так, чтобы при загрузке изображений любых размеров и соотношений сторон верстка не ломалась.
2) Мобильная (адаптивная) верстка.
+ Сам сайт отцентрирован по центру и может быть в ширину от 375px до 1440px, адаптивность достигнута засчет изменения grid сетки при уменьшении экрана браузера и относительных единиц измерения.
3) Сделать админку Directus доступной по адресу /directus (Например, если Ваш frontend поднят на localhost:3000, то админка Directus должна открываться на localhost:3000/directus). Таким образом, Ваш frontend и backend будут доступны на одном порту.
+ Реализовано через http-proxy-middleware, все запросы на localhost:3000/directus перенаправляются на localhost:8055/
4) Предусмотреть пагинацию в списке фотографий.
5) Предусмотреть механизм альбомов. Чтобы фото загружались не в единую галерею, а в конкретный альбом. На главной странице вместо общего списка фото должен отображаться список альбомов. При клике на альбом должен происходить переход на страницу со списком фото в данном альбоме. При клике каждое фото также должно открываться во всплывающем окне, как это было в основном задании.
6) Реализовать переключение фото внутри альбома по стрелкам не покидая всплывающего окна.
7) Реализуйте роутинг, который позволяет скопировать ссылку на любой альбом и фото внутри него. (При открытии ссылки на фото пользователь сразу должен оказаться на странице соответствующего альбома с открытым всплывающим окном нужной фото)  Также убедитесь, что при переключении фото внутри альбома с помощью стрелок из пункта 6) пользователь может “отмотать” свои переключения с помощью кнопки “назад” в браузере.
8) Добавьте поддержку превьюшек. Чтобы при отображении списка фото сжатие размеров происходило не на клиенте, а на сервере. Обратитесь к документации Directus, чтобы посмотреть, как это можно сделать.
+ Фотографии в альбомах загружаются с качеством (quality) равным 50, шириной (width) 300, высотой (height) 200, ширина и высота такие, так как при отображении всех изображений в альбоме их размер равен 300 на 200.
9) Обернуть frontend приложение в docker-контейнер и настроить docker-compose вместе с Directus.

## b. Инструкции по запуску приложения

```shell
    git clone https://github.com/vovavish/OurGallery.git
    cd ./OurGallery/
    cd ./directus/
    docker compose up -d
```
Перейти на localhost:8055/ или localhost:3000/directus/ и авторизоваться:
+ логин - admin@example.com
+ пароль - d1r3ctu5

Далее приложение полностью доступно по адресу localhost:3000/

## c. Скрины работающего приложения
### Главная страница альбомов
![Главная страница альбомов](https://github.com/vovavish/OurGallery/blob/main/Screenshot%202024-08-26%20011556.png)
### Страница альбома Mountains
![Страница альбома Mountains](https://github.com/vovavish/OurGallery/blob/main/Screenshot%202024-08-26%20011619.png)
### Страница альбома Mountains на 3 странице
![Главная страница альбомов](https://github.com/vovavish/OurGallery/blob/main/Screenshot%202024-08-26%20011721.png)
### Откытое модальное окно изображения в альбоме
![Главная страница альбомов](https://github.com/vovavish/OurGallery/blob/main/Screenshot%202024-08-26%20011648.png)